<?xml version="1.0" encoding="UTF-8"?>
<svg width="400px" height="400px" viewBox="0 0 400 400" version="1.1" xmlns="http://www.w3.org/2000/svg">
    <title>countdownclock</title>


    <style>
        * {
            transform-origin: center center;
        }
        #hand { fill: #5F555A; }
        #background, #blanker, #lightblanker { fill: #AFA4A2; }
        #light { fill: url(#g1); }
    </style>

    <defs>
        <radialGradient id="g1" fx="0" fy="0.5" fr="0" cx="0.5" cy="0.5" r="1">
            <stop stop-color="#FEF3D5" offset="0%"></stop>
            <stop stop-color="#FBBA6E" offset="100%"></stop>
        </radialGradient>
    </defs>

    <circle id="background" cx="200" cy="200" r="200"></circle>

    <path
        id="light"
        d="M 200 4 L 200 0 A 200 200, 0, 1 1, 200 400 "
        transform="scale(0.95,0.95)"
    ></path>

    <g id="blanker" transform="rotate(0)">
        <path d="M 200 4 L 200 0 A 200 200, 0, 1 1, 200 400" ></path>
        <circle id="lightblanker" cx="200" cy="200" r="100"></circle>
    </g>

    <g id="pips" fill="#857878">
        <rect id="crossvert" x="198" y="0" width="4" height="400"></rect>
        <rect id="crosshoriz" x="0" y="198" width="400" height="4"></rect>
        <rect x="198" y="20" width="4" height="40" transform="rotate(30)"></rect>
        <rect x="198" y="20" width="4" height="40" transform="rotate(60)"></rect>
        <rect x="198" y="20" width="4" height="40" transform="rotate(120)"></rect>
        <rect x="198" y="20" width="4" height="40" transform="rotate(150)"></rect>
        <rect x="198" y="20" width="4" height="40" transform="rotate(210)"></rect>
        <rect x="198" y="20" width="4" height="40" transform="rotate(240)"></rect>
        <rect x="198" y="20" width="4" height="40" transform="rotate(300)"></rect>
        <rect x="198" y="20" width="4" height="40" transform="rotate(330)"></rect>
    </g>

    <g id="hand">
        <circle id="handcentre" cx="200" cy="200" r="25"></circle>
        <path
            transform="rotate(0)"
            id="handpointer"
            fill="#5F555A"
            d="M185,200 L200,20 215,200 Z">
        </path>
    </g>

    <audio xmlns="http://www.w3.org/1999/xhtml">
      <source src="sounds.mp3" type="audio/mpeg"></source>
    </audio>

    <script>
      const anglePerSecond = 180/30;
      const centre = {x:200, y:200};
      const rotateElSmooth = document.getElementById('handpointer');
      const rotateElChoppy = document.getElementById('blanker');
      const audio = document.querySelector('audio');

      let startTime;
      async function init() {
        startTime = Date.now();
        await audio.play();
        rotate();
      }
      function rotate() {
        const angleSmooth = (Date.now()-startTime)/1000*anglePerSecond;
        const angleChoppy = angleSmooth - (angleSmooth % anglePerSecond);
        rotateElSmooth.setAttribute('transform', `rotate(${angleSmooth})`);
        rotateElChoppy.setAttribute('transform', `rotate(${angleChoppy})`);
        if (angleSmooth &lt; 180) requestAnimationFrame(rotate);
      }
      document.addEventListener('click', init);
    </script>
</svg>
